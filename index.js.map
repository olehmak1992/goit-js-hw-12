{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nexport const loadMoreBtn = document.querySelector('.load-more-btn');\n\nconst simpleGallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  const imagesList = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=${largeImageURL}>\n            <img\n                class=\"gallery-image\"\n                src=${webformatURL} \n                alt=\"${tags}\"\n            />\n            <ul class=\"gallery-desc\">\n                <li>\n                    <h2>Likes</h2><p>${likes}</p>\n                </li>\n                <li>\n                    <h2>Views</h2><p>${views}</p>\n                </li>\n                <li>\n                    <h2>Comments</h2><p>${comments}</p>\n                </li>\n                <li>\n                    <h2>Downloads</h2><p>${downloads}</p>\n                </li>\n            </ul>\n        </a>\n    </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', imagesList);\n\n  simpleGallery.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('hidden');\n}\n","import axios from 'axios';\n\nimport * as render from './render-functions';\n\nexport async function getImagesByQuery(query, page) {\n  render.showLoader();\n\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '49849891-12ae0f2235913a172a6db425e',\n        q: `${query}`,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport * as render from './js/render-functions';\n\nexport const form = document.querySelector('.form');\nconst input = document.querySelector('[name=\"search-text\"]');\n\nlet page = 1;\nlet totalPages;\nlet query;\n\nform.addEventListener('submit', submitForm);\nrender.loadMoreBtn.addEventListener('click', loadMore);\n\nasync function submitForm(event) {\n  event.preventDefault();\n  render.clearGallery();\n  query = input.value.trim();\n  page = 1;\n\n  if (!query) {\n    form.reset();\n    return;\n  }\n\n  try {\n    const response = await getImagesByQuery(query, page);\n    totalPages = Math.ceil(response.totalHits / response.hits.length);\n\n    if (response.hits.length === 0) {\n      render.hideLoadMoreButton();\n      render.hideLoader();\n      form.reset();\n      return iziToast.info({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n\n    render.createGallery(response.hits);\n    render.hideLoader();\n\n    if (page >= totalPages) {\n      return iziToast.info({\n        title: 'Caution',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n\n    render.showLoadMoreButton();\n  } catch (error) {\n    return console.log(error.message);\n  }\n  form.reset();\n}\n\nasync function loadMore() {\n  render.hideLoadMoreButton();\n  render.showLoader();\n  page += 1;\n\n  try {\n    const response = await getImagesByQuery(query, page);\n    render.createGallery(response.hits);\n    render.hideLoader();\n\n    const item = document.querySelector('.gallery-item');\n    const itemHeight = item.getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: itemHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (page >= totalPages) {\n      return iziToast.info({\n        title: 'Caution',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n    render.showLoadMoreButton();\n  } catch (error) {\n    return console.log(error.message);\n  }\n}\n"],"names":["gallery","loader","loadMoreBtn","simpleGallery","SimpleLightbox","createGallery","images","imagesList","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","getImagesByQuery","query","page","render.showLoader","axios","error","form","input","totalPages","submitForm","render.loadMoreBtn","loadMore","event","render.clearGallery","response","render.hideLoadMoreButton","render.hideLoader","iziToast","render.createGallery","render.showLoadMoreButton","itemHeight"],"mappings":"+vBAGA,MAAMA,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAClCC,EAAc,SAAS,cAAc,gBAAgB,EAE5DC,EAAgB,IAAIC,EAAe,aAAc,CACrD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAaD,EAChB,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,uCAC+BL,CAAa;AAAA;AAAA;AAAA,sBAG9BD,CAAY;AAAA,uBACXE,CAAI;AAAA;AAAA;AAAA;AAAA,uCAIYC,CAAK;AAAA;AAAA;AAAA,uCAGLC,CAAK;AAAA;AAAA;AAAA,0CAGFC,CAAQ;AAAA;AAAA;AAAA,2CAGPC,CAAS;AAAA;AAAA;AAAA;AAAA,UAK/C,EACA,KAAK,EAAE,EAEVd,EAAQ,mBAAmB,YAAaO,CAAU,EAElDJ,EAAc,QAAO,CACvB,CAEO,SAASY,GAAe,CAC7Bf,EAAQ,UAAY,EACtB,CAEO,SAASgB,GAAa,CAC3Bf,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEO,SAASgB,GAAa,CAC3BhB,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEO,SAASiB,GAAqB,CACnChB,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEO,SAASiB,GAAqB,CACnCjB,EAAY,UAAU,IAAI,QAAQ,CACpC,CCrEO,eAAekB,EAAiBC,EAAOC,EAAM,CAClDC,IAEA,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAG,GAAGH,CAAK,GACX,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACD,CACP,CAAK,GACe,IACjB,OAAQG,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,CCjBO,MAAMC,EAAO,SAAS,cAAc,OAAO,EAC5CC,EAAQ,SAAS,cAAc,sBAAsB,EAE3D,IAAIL,EAAO,EACPM,EACAP,EAEJK,EAAK,iBAAiB,SAAUG,CAAU,EAC1CC,EAAmB,iBAAiB,QAASC,CAAQ,EAErD,eAAeF,EAAWG,EAAO,CAM/B,GALAA,EAAM,eAAc,EACpBC,IACAZ,EAAQM,EAAM,MAAM,OACpBL,EAAO,EAEH,CAACD,EAAO,CACVK,EAAK,MAAK,EACV,MACD,CAED,GAAI,CACF,MAAMQ,EAAW,MAAMd,EAAiBC,EAAOC,CAAI,EAGnD,GAFAM,EAAa,KAAK,KAAKM,EAAS,UAAYA,EAAS,KAAK,MAAM,EAE5DA,EAAS,KAAK,SAAW,EAC3BC,OAAAA,IACAC,IACAV,EAAK,MAAK,EACHW,EAAS,KAAK,CACnB,MAAO,QACP,QACE,2EACF,SAAU,UAClB,CAAO,EAMH,GAHAC,EAAqBJ,EAAS,IAAI,EAClCE,IAEId,GAAQM,EACV,OAAOS,EAAS,KAAK,CACnB,MAAO,UACP,QAAS,6DACT,SAAU,UAClB,CAAO,EAGHE,GACD,OAAQd,EAAO,CACd,OAAO,QAAQ,IAAIA,EAAM,OAAO,CACjC,CACDC,EAAK,MAAK,CACZ,CAEA,eAAeK,GAAW,CACxBI,IACAZ,IACAD,GAAQ,EAER,GAAI,CACF,MAAMY,EAAW,MAAMd,EAAiBC,EAAOC,CAAI,EACnDgB,EAAqBJ,EAAS,IAAI,EAClCE,IAGA,MAAMI,EADO,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OAQhD,GANA,OAAO,SAAS,CACd,KAAM,EACN,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EAEGlB,GAAQM,EACV,OAAOS,EAAS,KAAK,CACnB,MAAO,UACP,QAAS,6DACT,SAAU,UAClB,CAAO,EAEHE,GACD,OAAQd,EAAO,CACd,OAAO,QAAQ,IAAIA,EAAM,OAAO,CACjC,CACH"}